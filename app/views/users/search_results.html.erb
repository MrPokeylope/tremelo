<% provide(:title, 'Search Results') %>

<!-- Scripts for gmaps4rails. Just accept it -->
<script src="//maps.google.com/maps/api/js?v=3.13&amp;sensor=false&amp;libraries=geometry" type="text/javascript"></script>
<script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js' type='text/javascript'></script>

<div class="container">

	<h1 class="page-heading">Search Results</h1>

	<!-- Search bar -->
	<div class="row">
		<div class="col-xs-10 col-xs-offset-1">
			

		</div>
	</div>

	<!-- <p>
		Searching by:<br>
		<% for it in @searching_by %>
			<ul>
				<%= it %>
			</ul>
		<% end %>
	</p> -->

	<% if @results.empty? %>

		<h2 class="text-center">
			No Results for "<%= params[:display_name] %>"
		</h2>

	<% else %>
		<!-- =========== Listing Found users ============== -->
		<ul>
		<% for result in @results %>
			<li>
				 <%= link_to "#{result.display_name}", result %>
				<!-- Display the user's tags to make it clear which users play what-->
				<% for user_tag in UserTags.where(user_id: result.id) %>
	          	<% tag = Tag.find(user_tag.tag_id) %>
	          	<%= content_tag(:span, "#{tag.content}", :class => 'label label-danger', 
	          	:style => "background-color: rgb(#{tag.get_red},#{tag.get_green},#{tag.get_blue}") %>
	        	<%end%>
	        </li>
		<%end%>
		</ul>

		<!-- GMaps4Rails Stuff -->
		<script type = "text/javascript" >
		$(document).ready(function() {    
		  $('input[type="radio"][data-behavior="clickable"]').click(function(evt) {
		    alert("you chose the option: " + $(this).val());
		  });
		});
		</script>
		<!-- Finally displaying the map -->
	  	<div style='width: 800px;'>
			<div id="map" style='width: 600px; height: 400px;'></div>
		</div>

		<!-- Create the markers -->
		<script type="text/javascript">
		handler = Gmaps.build('Google');
		handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
		  var markers = handler.addMarkers(<%=raw @hash.to_json %>);
		  
		  handler.bounds.extendWith(markers);
		  handler.fitMapToBounds();
		});
		</script>

	<% end %>

</div>